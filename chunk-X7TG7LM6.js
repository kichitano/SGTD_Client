import{d as k,f as O,h as E,i as f,k as N,l as I,n as L,o as j,p as B,r as D,t as T,u as G,v as R,w as q,x as A,y as z,z as U}from"./chunk-5LDV54AT.js";import{$ as g,Bb as F,Ga as C,Ia as c,Kb as P,S as a,T as s,ba as m,cb as w,eb as _,ha as e,ia as i,ib as M,ja as d,lc as V,oa as S,vb as y,xa as n,z as h,zb as x}from"./chunk-2JPZ2W7K.js";var H=r=>({"ng-invalid ng-dirty":r});function K(r,l){r&1&&(e(0,"small",17),n(1," El usuario es obligatorio. "),i())}function Q(r,l){r&1&&(e(0,"small",17),n(1," La contrase\xF1a es obligatoria. "),i())}var J=class r{constructor(l,o,t,p,u){this.formBuilder=l;this.authService=o;this.router=t;this.spinnerPrimeNgService=p;this.messageService=u;this.loginForm=this.formBuilder.group({username:["",f.required],password:["",f.required]})}loginForm;submitted=!1;onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;let l={email:this.loginForm.get("username")?.value,password:this.loginForm.get("password")?.value};this.spinnerPrimeNgService.use(this.authService.login(l)).subscribe({next:o=>{o.success?(this.authService.setSession(o),this.router.navigate(["/panel"]).then(()=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"\xA1Bienvenido!",life:3e3})})):this.messageService.add({severity:"error",summary:"Error",detail:"Credenciales inv\xE1lidas",life:3e3})},error:o=>{this.loginForm.get("password")?.reset()}})}static \u0275fac=function(o){return new(o||r)(s(D),s(F),s(y),s(V),s(P))};static \u0275cmp=h({type:r,selectors:[["app-login-show"]],standalone:!0,features:[C],decls:27,vars:11,consts:[[1,"background"],[1,"blur-background"],[1,"login-container"],[1,"login-left"],["src","assets/login-gobierno-regional-tacna.jpg","alt","Login"],[1,"login-right","p-fluid"],[1,"subtitle"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"row-block"],[1,"row-item-block-100"],["id","username","type","text","pInputText","","formControlName","username",3,"ngClass"],["for","username"],["class","p-error",4,"ngIf"],["id","password","formControlName","password","styleClass","w-full",3,"toggleMask","ngClass","feedback"],["for","password"],[1,"field","mt-6"],["pButton","","pRipple","","label","Iniciar Sesi\xF3n","icon","pi pi-sign-in",1,"p-button-primary","w-full"],[1,"p-error"]],template:function(o,t){if(o&1&&(e(0,"div",0),d(1,"div",1),e(2,"div",2)(3,"div",3),d(4,"img",4),i(),e(5,"div",5)(6,"p",6),n(7,"Bienvenido a SGTD"),i(),e(8,"h2"),n(9,"Iniciar Sesi\xF3n"),i(),e(10,"form",7),S("ngSubmit",function(){return t.onSubmit()}),e(11,"div",8)(12,"div",9)(13,"p-floatLabel"),d(14,"input",10),e(15,"label",11),n(16,"Usuario"),i()(),g(17,K,2,0,"small",12),i()(),e(18,"div",8)(19,"div",9)(20,"p-floatLabel"),d(21,"p-password",13),e(22,"label",14),n(23,"Contrase\xF1a"),i()(),g(24,Q,2,0,"small",12),i()(),e(25,"div",15),d(26,"button",16),i()()()()()),o&2){let p,u,v,b;a(10),m("formGroup",t.loginForm),a(4),m("ngClass",c(7,H,t.submitted&&((p=t.loginForm.get("username"))==null?null:p.hasError("required")))),a(3),m("ngIf",t.submitted&&((u=t.loginForm.get("username"))==null?null:u.hasError("required"))),a(4),m("toggleMask",!0)("ngClass",c(9,H,t.submitted&&((v=t.loginForm.get("password"))==null?null:v.hasError("required"))))("feedback",!1),a(3),m("ngIf",t.submitted&&((b=t.loginForm.get("password"))==null?null:b.hasError("required")))}},dependencies:[M,w,_,T,L,E,N,I,j,B,O,k,R,G,U,z,A,q,x],styles:[".background[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--surface-ground);position:relative}.blur-background[_ngcontent-%COMP%]{position:absolute;inset:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:0}.login-container[_ngcontent-%COMP%]{display:flex;background-color:var(--surface-card);border-radius:12px;overflow:hidden;width:900px;height:600px;box-shadow:0 3px 5px #00000005,0 0 2px #0000000d,0 1px 4px #00000014;z-index:1}.login-left[_ngcontent-%COMP%]{flex:1}.login-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.login-right[_ngcontent-%COMP%]{flex:1;padding:2rem;display:flex;flex-direction:column;justify-content:center}.login-right[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-color-secondary);margin-bottom:.5rem}.login-right[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:2rem;font-weight:600}[_nghost-%COMP%]     .p-password{width:100%}.content-block[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin-top:1.5rem;margin-left:1.5rem;margin-right:1.5rem}.row-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:2rem}.row-block[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:0 .5rem}.row-block[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding-left:0}.row-block[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{padding-right:0}.row-item-block-100[_ngcontent-%COMP%]{width:100%}"]})};export{J as LoginShowComponent};
